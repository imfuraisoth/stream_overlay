<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name1="viewport" content="width=device-width">
    <meta social1="viewport" content="width=device-width">
    <meta nextPlayer1="viewport" content="width=device-width">
    <meta nextPlayer2="viewport" content="width=device-width">
	<link rel="stylesheet" href="https://use.typekit.net/vsy6ybb.css">
    <title>Top 8 Overlay</title>
    <link href="style.css" rel="stylesheet" type="text/css" />
    <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
    <script src="https://kit.fontawesome.com/2c93766a80.js" crossorigin="anonymous"></script>
  </head>
  <body>
    <script>
    var r1_name1 = "";
    var r1_name2 = "";
    var r2_name1 = "";
    var r2_name2 = "";
    var r3_name1 = "";
    var r3_name2 = "";
    var r4_name1 = "";
    var r4_name2 = "";
    var r5_name1 = "";
    var r5_name2 = "";
    var r6_name1 = "";
    var r6_name2 = "";
    var r7_name1 = "";
    var r7_name2 = "";
    var r8_name1 = "";
    var r8_name2 = "";
    var r9_name1 = "";
    var r9_name2 = "";
    var r10_name1 = "";
    var r10_name2 = "";

    var r1_country1 = "";
    var r1_country2 = "";
    var r2_country1 = "";
    var r2_country2 = "";
    var r3_country1 = "";
    var r3_country2 = "";
    var r4_country1 = "";
    var r4_country2 = "";
    var r5_country1 = "";
    var r5_country2 = "";
    var r6_country1 = "";
    var r6_country2 = "";
    var r7_country1 = "";
    var r7_country2 = "";
    var r8_country1 = "";
    var r8_country2 = "";
    var r9_country1 = "";
    var r9_country2 = "";
    var r10_country1 = "";
    var r10_country2 = "";

    var r1_score1 = "";
    var r1_score2 = "";
    var r2_score1 = "";
    var r2_score2 = "";
    var r3_score1 = "";
    var r3_score2 = "";
    var r4_score1 = "";
    var r4_score2 = "";
    var r5_score1 = "";
    var r5_score2 = "";
    var r6_score1 = "";
    var r6_score2 = "";
    var r7_score1 = "";
    var r7_score2 = "";
    var r8_score1 = "";
    var r8_score2 = "";
    var r9_score1 = "";
    var r9_score2 = "";
    var r10_score1 = "";
    var r10_score2 = "";
    var r10_score1_2 = "";
    var r10_score2_2 = "";
	
	var current_round = 0;

    var flagsDir = "../../../resources/countries/iso/64shiny/";
    //var serverIp = readServerIp();
   var serverIp = "192.168.0.169:8080";

    function readServerIp() {
        var request = new XMLHttpRequest();
        request.open("GET", "../config/serverip.txt", false);
        request.send(null);
        return request.responseText;
    }
	
	function markNextPlayers() {
      fetch('http://' + serverIp + '/getTop8CurrentNextData')
          .then(function (response) {
            return response.json();
          })
          .then(function (data) {
              appendData(data);
            })
          .catch(function (err) {
            console.log('error: ' + err);
          });
          function appendData(data) {
			current_round = data.currentRound;
		  }}

    function loadElements() {
		markNextPlayers();
		  
      fetch('http://' + serverIp + '/getTop8PlayerData')
          .then(function (response) {
            return response.json();
          })
          .then(function (data) {
              appendData(data);
            })
          .catch(function (err) {
            console.log('error: ' + err);
          });
          function appendData(data) {
            if (data.r1.p1.name !== r1_name1) {
              var element = document.getElementById("r1_d_n1");
              if (!!element) {
                fadeOutElement(element);
              }

              r1_name1 = data.r1.p1.name;
              if (data.r1.p1.name.length > 0) {
                var name = document.createElement("span");
                name.setAttribute("id", "r1_n1");
                name.style.color = "#FFFFFF";
                name.innerHTML = r1_name1;
				name.classList.add("names");
                var div = document.createElement("div");
                div.setAttribute("id", "r1_d_n1");
                div.appendChild(name);
                document.body.appendChild(div);
				modifyNames(name);
              }
            }

            if (data.r1.p1.score !== r1_score1) {
              var element = document.getElementById("r1_d_s1");
              if (!!element) {
                fadeOutElement(element);
              }

              r1_score1 = data.r1.p1.score;
              if (data.r1.p1.score.length > 0) {
                var score = document.createElement("span");
                score.setAttribute("id", "r1_s1");
                score.style.color = "#FFFFFF";
                score.innerHTML = r1_score1;
                var div = document.createElement("div");
                div.setAttribute("id", "r1_d_s1");
                div.appendChild(score);
                document.body.appendChild(div);
              }
            }

            if (data.r1.p2.name !== r1_name2) {
              var element = document.getElementById("r1_d_n2");
              if (!!element) {
                fadeOutElement(element);
              }

              r1_name2 = data.r1.p2.name;
              if (data.r1.p2.name.length > 0) {
                var name = document.createElement("span");
                name.setAttribute("id", "r1_n2");
                name.style.color = "#FFFFFF";
                name.innerHTML = r1_name2;
				name.classList.add("names");
                var div = document.createElement("div");
                div.setAttribute("id", "r1_d_n2");
                div.appendChild(name);
                document.body.appendChild(div);
				modifyNames(name);
              }
            }

            if (data.r1.p2.score !== r1_score2) {
              var element = document.getElementById("r1_d_s2");
              if (!!element) {
                fadeOutElement(element);
              }

              r1_score2 = data.r1.p2.score;
              if (data.r1.p2.score.length > 0) {
                var score = document.createElement("span");
                score.setAttribute("id", "r1_s2");
                score.style.color = "#FFFFFF";
                score.innerHTML = r1_score2;
                var div = document.createElement("div");
                div.setAttribute("id", "r1_d_s2");
                div.appendChild(score);
                document.body.appendChild(div);
              }
            }

            <!-- ******************************************************************* -->

            if (data.r2.p1.name !== r2_name1) {
              var element = document.getElementById("r2_d_n1");
              if (!!element) {
                fadeOutElement(element);
              }

              r2_name1 = data.r2.p1.name;
              if (data.r2.p1.name.length > 0) {
                var name = document.createElement("span");
                name.setAttribute("id", "r2_n1");
                name.style.color = "#FFFFFF";
                name.innerHTML = r2_name1;
				name.classList.add("names");
                var div = document.createElement("div");
                div.setAttribute("id", "r2_d_n1");
                div.appendChild(name);
                document.body.appendChild(div);
				modifyNames(name);
              }
            }

            if (data.r2.p1.score !== r2_score1) {
              var element = document.getElementById("r2_d_s1");
              if (!!element) {
                fadeOutElement(element);
              }

              r2_score1 = data.r2.p1.score;
              if (data.r2.p1.score.length > 0) {
                var score = document.createElement("span");
                score.setAttribute("id", "r2_s1");
                score.style.color = "#FFFFFF";
                score.innerHTML = r2_score1;
                var div = document.createElement("div");
                div.setAttribute("id", "r2_d_s1");
                div.appendChild(score);
                document.body.appendChild(div);
              }
            }

            if (data.r2.p2.name !== r2_name2) {
              var element = document.getElementById("r2_d_n2");
              if (!!element) {
                fadeOutElement(element);
              }

              r2_name2 = data.r2.p2.name;
              if (data.r2.p2.name.length > 0) {
                var name = document.createElement("span");
                name.setAttribute("id", "r2_n2");
                name.style.color = "#FFFFFF";
                name.innerHTML = r2_name2;
				name.classList.add("names");
                var div = document.createElement("div");
                div.setAttribute("id", "r2_d_n2");
                div.appendChild(name);
                document.body.appendChild(div);
				modifyNames(name);
              }
            }

            if (data.r2.p2.score !== r2_score2) {
              var element = document.getElementById("r2_d_s2");
              if (!!element) {
                fadeOutElement(element);
              }

              r2_score2 = data.r2.p2.score;
              if (data.r2.p2.score.length > 0) {
                var score = document.createElement("span");
                score.setAttribute("id", "r2_s2");
                score.style.color = "#FFFFFF";
                score.innerHTML = r2_score2;
                var div = document.createElement("div");
                div.setAttribute("id", "r2_d_s2");
                div.appendChild(score);
                document.body.appendChild(div);
              }
            }

            <!-- ******************************************************************* -->

            if (data.r3.p1.name !== r3_name1) {
              var element = document.getElementById("r3_d_n1");
              if (!!element) {
                fadeOutElement(element);
              }

              r3_name1 = data.r3.p1.name;
              if (data.r3.p1.name.length > 0) {
                var name = document.createElement("span");
                name.setAttribute("id", "r3_n1");
                name.style.color = "#FFFFFF";
                name.innerHTML = r3_name1;
				name.classList.add("names");
                var div = document.createElement("div");
                div.setAttribute("id", "r3_d_n1");
                div.appendChild(name);
                document.body.appendChild(div);
				modifyNames(name);
              }
            }

            if (data.r3.p1.score !== r3_score1) {
              var element = document.getElementById("r3_d_s1");
              if (!!element) {
                fadeOutElement(element);
              }

              r3_score1 = data.r3.p1.score;
              if (data.r3.p1.score.length > 0) {
                var score = document.createElement("span");
                score.setAttribute("id", "r3_s1");
                score.style.color = "#FFFFFF";
                score.innerHTML = r3_score1;
                var div = document.createElement("div");
                div.setAttribute("id", "r3_d_s1");
                div.appendChild(score);
                document.body.appendChild(div);
              }
            }

            if (data.r3.p2.name !== r3_name2) {
              var element = document.getElementById("r3_d_n2");
              if (!!element) {
                fadeOutElement(element);
              }

              r3_name2 = data.r3.p2.name;
              if (data.r3.p2.name.length > 0) {
                var name = document.createElement("span");
                name.setAttribute("id", "r3_n2");
                name.style.color = "#FFFFFF";
                name.innerHTML = r3_name2;
				name.classList.add("names");
                var div = document.createElement("div");
                div.setAttribute("id", "r3_d_n2");
                div.appendChild(name);
                document.body.appendChild(div);
				modifyNames(name);
              }
            }

            if (data.r3.p2.score !== r3_score2) {
              var element = document.getElementById("r3_d_s2");
              if (!!element) {
                fadeOutElement(element);
              }

              r3_score2 = data.r3.p2.score;
              if (data.r3.p2.score.length > 0) {
                var score = document.createElement("span");
                score.setAttribute("id", "r3_s2");
                score.style.color = "#FFFFFF";
                score.innerHTML = r3_score2;
                var div = document.createElement("div");
                div.setAttribute("id", "r3_d_s2");
                div.appendChild(score);
                document.body.appendChild(div);
              }
            }

 <!-- ******************************************************************* -->

            if (data.r4.p1.name !== r4_name1) {
              var element = document.getElementById("r4_d_n1");
              if (!!element) {
                fadeOutElement(element);
              }

              r4_name1 = data.r4.p1.name;
              if (data.r4.p1.name.length > 0) {
                var name = document.createElement("span");
                name.setAttribute("id", "r4_n1");
                name.style.color = "#FFFFFF";
                name.innerHTML = r4_name1;
				name.classList.add("names");
                var div = document.createElement("div");
                div.setAttribute("id", "r4_d_n1");
                div.appendChild(name);
                document.body.appendChild(div);
				modifyNames(name);
              }
            }

            if (data.r4.p1.score !== r4_score1) {
              var element = document.getElementById("r4_d_s1");
              if (!!element) {
                fadeOutElement(element);
              }

              r4_score1 = data.r4.p1.score;
              if (data.r4.p1.score.length > 0) {
                var score = document.createElement("span");
                score.setAttribute("id", "r4_s1");
                score.style.color = "#FFFFFF";
                score.innerHTML = r4_score1;
                var div = document.createElement("div");
                div.setAttribute("id", "r4_d_s1");
                div.appendChild(score);
                document.body.appendChild(div);
              }
            }

            if (data.r4.p2.name !== r4_name2) {
              var element = document.getElementById("r4_d_n2");
              if (!!element) {
                fadeOutElement(element);
              }

              r4_name2 = data.r4.p2.name;
              if (data.r4.p2.name.length > 0) {
                var name = document.createElement("span");
                name.setAttribute("id", "r4_n2");
                name.style.color = "#FFFFFF";
                name.innerHTML = r4_name2;
				name.classList.add("names");
                var div = document.createElement("div");
                div.setAttribute("id", "r4_d_n2");
                div.appendChild(name);
                document.body.appendChild(div);
				modifyNames(name);
              }
            }

            if (data.r4.p2.score !== r4_score2) {
              var element = document.getElementById("r4_d_s2");
              if (!!element) {
                fadeOutElement(element);
              }

              r4_score2 = data.r4.p2.score;
              if (data.r4.p2.score.length > 0) {
                var score = document.createElement("span");
                score.setAttribute("id", "r4_s2");
                score.style.color = "#FFFFFF";
                score.innerHTML = r4_score2;
                var div = document.createElement("div");
                div.setAttribute("id", "r4_d_s2");
                div.appendChild(score);
                document.body.appendChild(div);
              }
            }

            <!-- ******************************************************************* -->

            if (data.r5.p1.name !== r5_name1) {
              var element = document.getElementById("r5_d_n1");
              if (!!element) {
                fadeOutElement(element);
              }

              r5_name1 = data.r5.p1.name;
              if (data.r5.p1.name.length > 0) {
                var name = document.createElement("span");
                name.setAttribute("id", "r5_n1");
                name.style.color = "#FFFFFF";
                name.innerHTML = r5_name1;
				name.classList.add("names");
                var div = document.createElement("div");
                div.setAttribute("id", "r5_d_n1");
                div.appendChild(name);
                document.body.appendChild(div);
				modifyNames(name);
              }
            }

            if (data.r5.p1.score !== r5_score1) {
              var element = document.getElementById("r5_d_s1");
              if (!!element) {
                fadeOutElement(element);
              }

              r5_score1 = data.r5.p1.score;
              if (data.r5.p1.score.length > 0) {
                var score = document.createElement("span");
                score.setAttribute("id", "r5_s1");
                score.style.color = "#FFFFFF";
                score.innerHTML = r5_score1;
                var div = document.createElement("div");
                div.setAttribute("id", "r5_d_s1");
                div.appendChild(score);
                document.body.appendChild(div);
              }
            }

            if (data.r5.p2.name !== r5_name2) {
              var element = document.getElementById("r5_d_n2");
              if (!!element) {
                fadeOutElement(element);
              }

              r5_name2 = data.r5.p2.name;
              if (data.r5.p2.name.length > 0) {
                var name = document.createElement("span");
                name.setAttribute("id", "r5_n2");
                name.style.color = "#FFFFFF";
                name.innerHTML = r5_name2;
				name.classList.add("names");
                var div = document.createElement("div");
                div.setAttribute("id", "r5_d_n2");
                div.appendChild(name);
                document.body.appendChild(div);
				modifyNames(name);
              }
            }

            if (data.r5.p2.score !== r5_score2) {
              var element = document.getElementById("r5_d_s2");
              if (!!element) {
                fadeOutElement(element);
              }

              r5_score2 = data.r5.p2.score;
              if (data.r5.p2.score.length > 0) {
                var score = document.createElement("span");
                score.setAttribute("id", "r5_s2");
                score.style.color = "#FFFFFF";
                score.innerHTML = r5_score2;
                var div = document.createElement("div");
                div.setAttribute("id", "r5_d_s2");
                div.appendChild(score);
                document.body.appendChild(div);
              }
            }

            <!-- ******************************************************************* -->

            if (data.r6.p1.name !== r6_name1) {
              var element = document.getElementById("r6_d_n1");
              if (!!element) {
                fadeOutElement(element);
              }

              r6_name1 = data.r6.p1.name;
              if (data.r6.p1.name.length > 0) {
                var name = document.createElement("span");
                name.setAttribute("id", "r6_n1");
                name.style.color = "#FFFFFF";
                name.innerHTML = r6_name1;
				name.classList.add("names");
                var div = document.createElement("div");
                div.setAttribute("id", "r6_d_n1");
                div.appendChild(name);
                document.body.appendChild(div);
				modifyNames(name);
              }
            }

            if (data.r6.p1.score !== r6_score1) {
              var element = document.getElementById("r6_d_s1");
              if (!!element) {
                fadeOutElement(element);
              }

              r6_score1 = data.r6.p1.score;
              if (data.r6.p1.score.length > 0) {
                var score = document.createElement("span");
                score.setAttribute("id", "r6_s1");
                score.style.color = "#FFFFFF";
                score.innerHTML = r6_score1;
                var div = document.createElement("div");
                div.setAttribute("id", "r6_d_s1");
                div.appendChild(score);
                document.body.appendChild(div);
              }
            }

            if (data.r6.p2.name !== r6_name2) {
              var element = document.getElementById("r6_d_n2");
              if (!!element) {
                fadeOutElement(element);
              }

              r6_name2 = data.r6.p2.name;
              if (data.r6.p2.name.length > 0) {
                var name = document.createElement("span");
                name.setAttribute("id", "r6_n2");
                name.style.color = "#FFFFFF";
                name.innerHTML = r6_name2;
				name.classList.add("names");
                var div = document.createElement("div");
                div.setAttribute("id", "r6_d_n2");
                div.appendChild(name);
                document.body.appendChild(div);
				modifyNames(name);
              }
            }

            if (data.r6.p2.score !== r6_score2) {
              var element = document.getElementById("r6_d_s2");
              if (!!element) {
                fadeOutElement(element);
              }

              r6_score2 = data.r6.p2.score;
              if (data.r6.p2.score.length > 0) {
                var score = document.createElement("span");
                score.setAttribute("id", "r6_s2");
                score.style.color = "#FFFFFF";
                score.innerHTML = r6_score2;
                var div = document.createElement("div");
                div.setAttribute("id", "r6_d_s2");
                div.appendChild(score);
                document.body.appendChild(div);
              }
            }

            <!-- ******************************************************************* -->

            if (data.r7.p1.name !== r7_name1) {
              var element = document.getElementById("r7_d_n1");
              if (!!element) {
                fadeOutElement(element);
              }

              r7_name1 = data.r7.p1.name;
              if (data.r7.p1.name.length > 0) {
                var name = document.createElement("span");
                name.setAttribute("id", "r7_n1");
                name.style.color = "#FFFFFF";
                name.innerHTML = r7_name1;
				name.classList.add("names");
                var div = document.createElement("div");
                div.setAttribute("id", "r7_d_n1");
                div.appendChild(name);
                document.body.appendChild(div);
				modifyNames(name);
              }
            }

            if (data.r7.p1.score !== r7_score1) {
              var element = document.getElementById("r7_d_s1");
              if (!!element) {
                fadeOutElement(element);
              }

              r7_score1 = data.r7.p1.score;
              if (data.r7.p1.score.length > 0) {
                var score = document.createElement("span");
                score.setAttribute("id", "r7_s1");
                score.style.color = "#FFFFFF";
                score.innerHTML = r7_score1;
                var div = document.createElement("div");
                div.setAttribute("id", "r7_d_s1");
                div.appendChild(score);
                document.body.appendChild(div);
              }
            }

            if (data.r7.p2.name !== r7_name2) {
              var element = document.getElementById("r7_d_n2");
              if (!!element) {
                fadeOutElement(element);
              }

              r7_name2 = data.r7.p2.name;
              if (data.r7.p2.name.length > 0) {
                var name = document.createElement("span");
                name.setAttribute("id", "r7_n2");
                name.style.color = "#FFFFFF";
                name.innerHTML = r7_name2;
				name.classList.add("names");
                var div = document.createElement("div");
                div.setAttribute("id", "r7_d_n2");
                div.appendChild(name);
                document.body.appendChild(div);
				modifyNames(name);
              }
            }

            if (data.r7.p2.score !== r7_score2) {
              var element = document.getElementById("r7_d_s2");
              if (!!element) {
                fadeOutElement(element);
              }

              r7_score2 = data.r7.p2.score;
              if (data.r7.p2.score.length > 0) {
                var score = document.createElement("span");
                score.setAttribute("id", "r7_s2");
                score.style.color = "#FFFFFF";
                score.innerHTML = r7_score2;
                var div = document.createElement("div");
                div.setAttribute("id", "r7_d_s2");
                div.appendChild(score);
                document.body.appendChild(div);
              }
            }

            <!-- ******************************************************************* -->

            if (data.r8.p1.name !== r8_name1) {
              var element = document.getElementById("r8_d_n1");
              if (!!element) {
                fadeOutElement(element);
              }

              r8_name1 = data.r8.p1.name;
              if (data.r8.p1.name.length > 0) {
                var name = document.createElement("span");
                name.setAttribute("id", "r8_n1");
                name.style.color = "#FFFFFF";
                name.innerHTML = r8_name1;
				name.classList.add("names");
                var div = document.createElement("div");
                div.setAttribute("id", "r8_d_n1");
                div.appendChild(name);
                document.body.appendChild(div);
				modifyNames(name);
              }
            }

            if (data.r8.p1.score !== r8_score1) {
              var element = document.getElementById("r8_d_s1");
              if (!!element) {
                fadeOutElement(element);
              }

              r8_score1 = data.r8.p1.score;
              if (data.r8.p1.score.length > 0) {
                var score = document.createElement("span");
                score.setAttribute("id", "r8_s1");
                score.style.color = "#FFFFFF";
                score.innerHTML = r8_score1;
                var div = document.createElement("div");
                div.setAttribute("id", "r8_d_s1");
                div.appendChild(score);
                document.body.appendChild(div);
              }
            }

            if (data.r8.p2.name !== r8_name2) {
              var element = document.getElementById("r8_d_n2");
              if (!!element) {
                fadeOutElement(element);
              }

              r8_name2 = data.r8.p2.name;
              if (data.r8.p2.name.length > 0) {
                var name = document.createElement("span");
                name.setAttribute("id", "r8_n2");
                name.style.color = "#FFFFFF";
                name.innerHTML = r8_name2;
				name.classList.add("names");
                var div = document.createElement("div");
                div.setAttribute("id", "r8_d_n2");
                div.appendChild(name);
                document.body.appendChild(div);
				modifyNames(name);
              }
            }

            if (data.r8.p2.score !== r8_score2) {
              var element = document.getElementById("r8_d_s2");
              if (!!element) {
                fadeOutElement(element);
              }

              r8_score2 = data.r8.p2.score;
              if (data.r8.p2.score.length > 0) {
                var score = document.createElement("span");
                score.setAttribute("id", "r8_s2");
                score.style.color = "#FFFFFF";
                score.innerHTML = r8_score2;
                var div = document.createElement("div");
                div.setAttribute("id", "r8_d_s2");
                div.appendChild(score);
                document.body.appendChild(div);
              }
            }

            <!-- ******************************************************************* -->

            if (data.r9.p1.name !== r9_name1) {
              var element = document.getElementById("r9_d_n1");
              if (!!element) {
                fadeOutElement(element);
              }

              r9_name1 = data.r9.p1.name;
              if (data.r9.p1.name.length > 0) {
                var name = document.createElement("span");
                name.setAttribute("id", "r9_n1");
                name.style.color = "#FFFFFF";
                name.innerHTML = r9_name1;
				name.classList.add("names");
                var div = document.createElement("div");
                div.setAttribute("id", "r9_d_n1");
                div.appendChild(name);
                document.body.appendChild(div);
				modifyNames(name);
              }
            }

            if (data.r9.p1.score !== r9_score1) {
              var element = document.getElementById("r9_d_s1");
              if (!!element) {
                fadeOutElement(element);
              }

              r9_score1 = data.r9.p1.score;
              if (data.r9.p1.score.length > 0) {
                var score = document.createElement("span");
                score.setAttribute("id", "r9_s1");
                score.style.color = "#FFFFFF";
                score.innerHTML = r9_score1;
                var div = document.createElement("div");
                div.setAttribute("id", "r9_d_s1");
                div.appendChild(score);
                document.body.appendChild(div);
              }
            }

            if (data.r9.p2.name !== r9_name2) {
              var element = document.getElementById("r9_d_n2");
              if (!!element) {
                fadeOutElement(element);
              }

              r9_name2 = data.r9.p2.name;
              if (data.r9.p2.name.length > 0) {
                var name = document.createElement("span");
                name.setAttribute("id", "r9_n2");
                name.style.color = "#FFFFFF";
                name.innerHTML = r9_name2;
				name.classList.add("names");
                var div = document.createElement("div");
                div.setAttribute("id", "r9_d_n2");
                div.appendChild(name);
                document.body.appendChild(div);
				modifyNames(name);
              }
            }

            if (data.r9.p2.score !== r9_score2) {
              var element = document.getElementById("r9_d_s2");
              if (!!element) {
                fadeOutElement(element);
              }

              r9_score2 = data.r9.p2.score;
              if (data.r9.p2.score.length > 0) {
                var score = document.createElement("span");
                score.setAttribute("id", "r9_s2");
                score.style.color = "#FFFFFF";
                score.innerHTML = r9_score2;
                var div = document.createElement("div");
                div.setAttribute("id", "r9_d_s2");
                div.appendChild(score);
                document.body.appendChild(div);
              }
            }

            <!-- ******************************************************************* -->

            if (data.r10.p1.name !== r10_name1) {
              var element = document.getElementById("r10_d_n1");
              if (!!element) {
                fadeOutElement(element);
              }

              r10_name1 = data.r10.p1.name;
              if (data.r10.p1.name.length > 0) {
                var name = document.createElement("span");
                name.setAttribute("id", "r10_n1");
                name.style.color = "#FFFFFF";
                name.innerHTML = r10_name1;
				name.classList.add("names");
                var div = document.createElement("div");
                div.setAttribute("id", "r10_d_n1");
                div.appendChild(name);
                document.body.appendChild(div);
				modifyNames(name);
              }
            }

            if (data.r10.p1.score !== r10_score1) {
              var element = document.getElementById("r10_d_s1");
              if (!!element) {
                fadeOutElement(element);
              }

              r10_score1 = data.r10.p1.score;
              if (data.r10.p1.score.length > 0) {
                var score = document.createElement("span");
                score.setAttribute("id", "r10_s1");
                score.style.color = "#FFFFFF";
                score.innerHTML = r10_score1;
                var div = document.createElement("div");
                div.setAttribute("id", "r10_d_s1");
                div.appendChild(score);
                document.body.appendChild(div);
              }
            }

            if (data.r10.p2.name !== r10_name2) {
              var element = document.getElementById("r10_d_n2");
              if (!!element) {
                fadeOutElement(element);
              }

              r10_name2 = data.r10.p2.name;
              if (data.r10.p2.name.length > 0) {
                var name = document.createElement("span");
                name.setAttribute("id", "r10_n2");
                name.style.color = "#FFFFFF";
                name.innerHTML = r10_name2;
				name.classList.add("names");
                var div = document.createElement("div");
                div.setAttribute("id", "r10_d_n2");
                div.appendChild(name);
                document.body.appendChild(div);
				modifyNames(name);
              }
            }

            if (data.r10.p2.score !== r10_score2) {
              var element = document.getElementById("r10_d_s2");
              if (!!element) {
                fadeOutElement(element);
              }

              r10_score2 = data.r10.p2.score;
              if (data.r10.p2.score.length > 0) {
                var score = document.createElement("span");
                score.setAttribute("id", "r10_s2");
                score.style.color = "#FFFFFF";
                score.innerHTML = r10_score2;
                var div = document.createElement("div");
                div.setAttribute("id", "r10_d_s2");
                div.appendChild(score);
                document.body.appendChild(div);
              }
            }

            if (data.r10.p1.score2 !== r10_score1_2) {
              var element = document.getElementById("r10_d_s1_2");
              if (!!element) {
                fadeOutElement(element);
              }

              r10_score1_2 = data.r10.p1.score2;
              if (data.r10.p1.score2.length > 0) {
                var score = document.createElement("span");
                score.setAttribute("id", "r10_s1_2");
                score.style.color = "#FFFFFF";
                score.innerHTML = r10_score1_2;
                var div = document.createElement("div");
                div.setAttribute("id", "r10_d_s1_2");
                div.appendChild(score);
                document.body.appendChild(div);
              }
            }

            if (data.r10.p2.score2 !== r10_score2_2) {
              var element = document.getElementById("r10_d_s2_2");
              if (!!element) {
                fadeOutElement(element);
              }

              r10_score2_2 = data.r10.p2.score2;
              if (data.r10.p2.score2.length > 0) {
                var score = document.createElement("span");
                score.setAttribute("id", "r10_s2_2");
                score.style.color = "#FFFFFF";
                score.innerHTML = r10_score2_2;
                var div = document.createElement("div");
                div.setAttribute("id", "r10_d_s2_2");
                div.appendChild(score);
                document.body.appendChild(div);
              }
            }

    <!-- *************************** Set Flag info ********************** -->
          if (data.r1.p1.country !== r1_country1) {
              var element = document.getElementById("r1_d_c1");
              if (!!element) {
                fadeOutElement(element);
              }

              r1_country1 = data.r1.p1.country;
              if (data.r1.p1.country.length > 0) {
                var country = document.createElement("img");
                country.setAttribute("id", "r1_c1");
                country.src = flagsDir + r1_country1 + ".png";
                var div = document.createElement("div");
                div.setAttribute("id", "r1_d_c1");
                div.appendChild(country);
                document.body.appendChild(div);
              }
          }

          if (data.r1.p2.country !== r1_country2) {
              var element = document.getElementById("r1_d_c2");
              if (!!element) {
                fadeOutElement(element);
              }

              r1_country2 = data.r1.p2.country;
              if (data.r1.p2.country.length > 0) {
                var country = document.createElement("img");
                country.setAttribute("id", "r1_c2");
                country.src = flagsDir + r1_country2 + ".png";
                var div = document.createElement("div");
                div.setAttribute("id", "r1_d_c2");
                div.appendChild(country);
                document.body.appendChild(div);
              }
          }

          if (data.r2.p1.country !== r2_country1) {
              var element = document.getElementById("r2_d_c1");
              if (!!element) {
                fadeOutElement(element);
              }

              r2_country1 = data.r2.p1.country;
              if (data.r2.p1.country.length > 0) {
                var country = document.createElement("img");
                country.setAttribute("id", "r2_c1");
                country.src = flagsDir + r2_country1 + ".png";
                var div = document.createElement("div");
                div.setAttribute("id", "r2_d_c1");
                div.appendChild(country);
                document.body.appendChild(div);
              }
          }

          if (data.r2.p2.country !== r2_country2) {
              var element = document.getElementById("r2_d_c2");
              if (!!element) {
                fadeOutElement(element);
              }

              r2_country2 = data.r2.p2.country;
              if (data.r2.p2.country.length > 0) {
                var country = document.createElement("img");
                country.setAttribute("id", "r2_c2");
                country.src = flagsDir + r2_country2 + ".png";
                var div = document.createElement("div");
                div.setAttribute("id", "r2_d_c2");
                div.appendChild(country);
                document.body.appendChild(div);
              }
          }

          if (data.r3.p1.country !== r3_country1) {
              var element = document.getElementById("r3_d_c1");
              if (!!element) {
                fadeOutElement(element);
              }

              r3_country1 = data.r3.p1.country;
              if (data.r3.p1.country.length > 0) {
                var country = document.createElement("img");
                country.setAttribute("id", "r3_c1");
                country.src = flagsDir + r3_country1 + ".png";
                var div = document.createElement("div");
                div.setAttribute("id", "r3_d_c1");
                div.appendChild(country);
                document.body.appendChild(div);
              }
          }

          if (data.r3.p2.country !== r3_country2) {
              var element = document.getElementById("r3_d_c2");
              if (!!element) {
                fadeOutElement(element);
              }

              r3_country2 = data.r3.p2.country;
              if (data.r3.p2.country.length > 0) {
                var country = document.createElement("img");
                country.setAttribute("id", "r3_c2");
                country.src = flagsDir + r3_country2 + ".png";
                var div = document.createElement("div");
                div.setAttribute("id", "r3_d_c2");
                div.appendChild(country);
                document.body.appendChild(div);
              }
          }

          if (data.r4.p1.country !== r4_country1) {
              var element = document.getElementById("r4_d_c1");
              if (!!element) {
                fadeOutElement(element);
              }

              r4_country1 = data.r4.p1.country;
              if (data.r4.p1.country.length > 0) {
                var country = document.createElement("img");
                country.setAttribute("id", "r4_c1");
                country.src = flagsDir + r4_country1 + ".png";
                var div = document.createElement("div");
                div.setAttribute("id", "r4_d_c1");
                div.appendChild(country);
                document.body.appendChild(div);
              }
          }

          if (data.r4.p2.country !== r4_country2) {
              var element = document.getElementById("r4_d_c2");
              if (!!element) {
                fadeOutElement(element);
              }

              r4_country2 = data.r4.p2.country;
              if (data.r4.p2.country.length > 0) {
                var country = document.createElement("img");
                country.setAttribute("id", "r4_c2");
                country.src = flagsDir + r4_country2 + ".png";
                var div = document.createElement("div");
                div.setAttribute("id", "r4_d_c2");
                div.appendChild(country);
                document.body.appendChild(div);
              }
          }

          if (data.r5.p1.country !== r5_country1) {
              var element = document.getElementById("r5_d_c1");
              if (!!element) {
                fadeOutElement(element);
              }

              r5_country1 = data.r5.p1.country;
              if (data.r5.p1.country.length > 0) {
                var country = document.createElement("img");
                country.setAttribute("id", "r5_c1");
                country.src = flagsDir + r5_country1 + ".png";
                var div = document.createElement("div");
                div.setAttribute("id", "r5_d_c1");
                div.appendChild(country);
                document.body.appendChild(div);
              }
          }

          if (data.r5.p2.country !== r5_country2) {
              var element = document.getElementById("r5_d_c2");
              if (!!element) {
                fadeOutElement(element);
              }

              r5_country2 = data.r5.p2.country;
              if (data.r5.p2.country.length > 0) {
                var country = document.createElement("img");
                country.setAttribute("id", "r5_c2");
                country.src = flagsDir + r5_country2 + ".png";
                var div = document.createElement("div");
                div.setAttribute("id", "r5_d_c2");
                div.appendChild(country);
                document.body.appendChild(div);
              }
          }

          if (data.r6.p1.country !== r6_country1) {
              var element = document.getElementById("r6_d_c1");
              if (!!element) {
                fadeOutElement(element);
              }

              r6_country1 = data.r6.p1.country;
              if (data.r6.p1.country.length > 0) {
                var country = document.createElement("img");
                country.setAttribute("id", "r6_c1");
                country.src = flagsDir + r6_country1 + ".png";
                var div = document.createElement("div");
                div.setAttribute("id", "r6_d_c1");
                div.appendChild(country);
                document.body.appendChild(div);
              }
          }

          if (data.r6.p2.country !== r6_country2) {
              var element = document.getElementById("r6_d_c2");
              if (!!element) {
                fadeOutElement(element);
              }

              r6_country2 = data.r6.p2.country;
              if (data.r6.p2.country.length > 0) {
                var country = document.createElement("img");
                country.setAttribute("id", "r6_c2");
                country.src = flagsDir + r6_country2 + ".png";
                var div = document.createElement("div");
                div.setAttribute("id", "r6_d_c2");
                div.appendChild(country);
                document.body.appendChild(div);
              }
          }

          if (data.r7.p1.country !== r7_country1) {
              var element = document.getElementById("r7_d_c1");
              if (!!element) {
                fadeOutElement(element);
              }

              r7_country1 = data.r7.p1.country;
              if (data.r7.p1.country.length > 0) {
                var country = document.createElement("img");
                country.setAttribute("id", "r7_c1");
                country.src = flagsDir + r7_country1 + ".png";
                var div = document.createElement("div");
                div.setAttribute("id", "r7_d_c1");
                div.appendChild(country);
                document.body.appendChild(div);
              }
          }

          if (data.r7.p2.country !== r7_country2) {
              var element = document.getElementById("r7_d_c2");
              if (!!element) {
                fadeOutElement(element);
              }

              r7_country2 = data.r7.p2.country;
              if (data.r7.p2.country.length > 0) {
                var country = document.createElement("img");
                country.setAttribute("id", "r7_c2");
                country.src = flagsDir + r7_country2 + ".png";
                var div = document.createElement("div");
                div.setAttribute("id", "r7_d_c2");
                div.appendChild(country);
                document.body.appendChild(div);
              }
          }

          if (data.r8.p1.country !== r8_country1) {
              var element = document.getElementById("r8_d_c1");
              if (!!element) {
                fadeOutElement(element);
              }

              r8_country1 = data.r8.p1.country;
              if (data.r8.p1.country.length > 0) {
                var country = document.createElement("img");
                country.setAttribute("id", "r8_c1");
                country.src = flagsDir + r8_country1 + ".png";
                var div = document.createElement("div");
                div.setAttribute("id", "r8_d_c1");
                div.appendChild(country);
                document.body.appendChild(div);
              }
          }

          if (data.r8.p2.country !== r8_country2) {
              var element = document.getElementById("r8_d_c2");
              if (!!element) {
                fadeOutElement(element);
              }

              r8_country2 = data.r8.p2.country;
              if (data.r8.p2.country.length > 0) {
                var country = document.createElement("img");
                country.setAttribute("id", "r8_c2");
                country.src = flagsDir + r8_country2 + ".png";
                var div = document.createElement("div");
                div.setAttribute("id", "r8_d_c2");
                div.appendChild(country);
                document.body.appendChild(div);
              }
          }

          if (data.r9.p1.country !== r9_country1) {
              var element = document.getElementById("r9_d_c1");
              if (!!element) {
                fadeOutElement(element);
              }

              r9_country1 = data.r9.p1.country;
              if (data.r9.p1.country.length > 0) {
                var country = document.createElement("img");
                country.setAttribute("id", "r9_c1");
                country.src = flagsDir + r9_country1 + ".png";
                var div = document.createElement("div");
                div.setAttribute("id", "r9_d_c1");
                div.appendChild(country);
                document.body.appendChild(div);
              }
          }

          if (data.r9.p2.country !== r9_country2) {
              var element = document.getElementById("r9_d_c2");
              if (!!element) {
                fadeOutElement(element);
              }

              r9_country2 = data.r9.p2.country;
              if (data.r9.p2.country.length > 0) {
                var country = document.createElement("img");
                country.setAttribute("id", "r9_c2");
                country.src = flagsDir + r9_country2 + ".png";
                var div = document.createElement("div");
                div.setAttribute("id", "r9_d_c2");
                div.appendChild(country);
                document.body.appendChild(div);
              }
          }

          if (data.r10.p1.country !== r10_country1) {
              var element = document.getElementById("r10_d_c1");
              if (!!element) {
                fadeOutElement(element);
              }

              r10_country1 = data.r10.p1.country;
              if (data.r10.p1.country.length > 0) {
                var country = document.createElement("img");
                country.setAttribute("id", "r10_c1");
                country.src = flagsDir + r10_country1 + ".png";
                var div = document.createElement("div");
                div.setAttribute("id", "r10_d_c1");
                div.appendChild(country);
                document.body.appendChild(div);
              }
          }

          if (data.r10.p2.country !== r10_country2) {
              var element = document.getElementById("r10_d_c2");
              if (!!element) {
                fadeOutElement(element);
              }

              r10_country2 = data.r10.p2.country;
              if (data.r10.p2.country.length > 0) {
                var country = document.createElement("img");
                country.setAttribute("id", "r10_c2");
                country.src = flagsDir + r10_country2 + ".png";
                var div = document.createElement("div");
                div.setAttribute("id", "r10_d_c2");
                div.appendChild(country);
                document.body.appendChild(div);
              }
          }
       }
    }

    function fadeOutElement(element) {
        var op = 1;  // initial opacity
        var timer = setInterval(function () {
            if (op <= 0.1) {
                clearInterval(timer);
                element.style.display = 'none';
                element.remove();
                return;
            } else {
              element.style.opacity = op;
              element.style.filter = 'alpha(opacity=' + op * 100 + ")";
              op -= op * 0.1;
            }
        }, 30);
    }
	

	function modifyNames(nameElement) {
		var max_width = parseInt(parseFloat($('.names').css('width').slice(0, -2)));
		var computedStyle = window.getComputedStyle(nameElement);
		var fontSize = parseFloat(computedStyle.getPropertyValue('font-size').slice(0, -2));
		while(nameElement.scrollWidth > max_width){
			fontSize = parseInt(fontSize * .95);
			nameElement.style.fontSize = fontSize + "px";
		}
		flashNextPlayerNames(nameElement);
	}
	
	function flashNextPlayerNames(nameElement) {
		var id = nameElement.id;
		var round = parseInt(id.match(/\d+/)[0]);
		if (current_round == round && round < 10) {
			nameElement.classList.add("current_match");
		}
	}

    window.setInterval(loadElements, 2000);
    </script>

  </body>
</html>